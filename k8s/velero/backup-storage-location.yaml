---
# BackupStorageLocation for MinIO on Synology NAS
# This configures where Velero stores backup data
apiVersion: velero.io/v1
kind: BackupStorageLocation
metadata:
  name: default
  namespace: velero
  labels:
    app.kubernetes.io/name: velero
    app.kubernetes.io/component: backup-storage
spec:
  # AWS provider for S3-compatible storage (MinIO)
  provider: aws

  # Object storage configuration
  objectStorage:
    bucket: velero-backups
    # Optional prefix for all backups in the bucket
    # prefix: velero

  # S3-specific configuration for MinIO
  config:
    # Region is required but can be any value for MinIO
    region: minio
    # MinIO endpoint on Synology NAS
    s3Url: http://192.168.1.230:9000
    # Required for MinIO - use path-style URLs instead of virtual hosted
    s3ForcePathStyle: "true"
    # Use the default credentials secret
    # credentialsFile: /credentials/cloud

  # Credentials reference
  credential:
    name: velero-minio-credentials
    key: cloud

  # Default storage location
  default: true

  # Access mode: ReadWrite allows backups and restores
  accessMode: ReadWrite
